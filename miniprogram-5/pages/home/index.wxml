<view class="home-container">
  <t-tabs defaultValue="all" bind:change="onTabChange">
    <t-tab-panel label="ÂÖ®ÈÉ®" value="all" />
    <t-tab-panel label="Â§±Áâ©" value="LOST" />
    <t-tab-panel label="ÊãõÈ¢Ü" value="FOUND" />
  </t-tabs>

  <t-pull-down-refresh
    value="{{enable}}"
    bind:refresh="onRefresh"
    loadingTexts="{{['‰∏ãÊãâÂà∑Êñ∞', 'ÊùæÊâãÂà∑Êñ∞', 'Ê≠£Âú®Âà∑Êñ∞', 'Âà∑Êñ∞ÂÆåÊàê']}}"
  >
    <view class="post-list">
      <view wx:if="{{posts.length === 0 && !loading}}" class="empty-tip">
        <t-empty description="ÊöÇÊó†Êï∞ÊçÆ" />
      </view>

      <view
        wx:for="{{posts}}"
        wx:key="id"
        class="post-card"
        data-id="{{item.id}}"
        bindtap="goDetail"
      >
        <view class="post-image">
          <image src="{{item.images[0].url}}" mode="aspectFill" />
          <view class="post-type {{item.type === 'LOST' ? 'lost' : 'found'}}">
            {{item.type === 'LOST' ? 'Â§±Áâ©' : 'ÊãõÈ¢Ü'}}
          </view>
        </view>
        <view class="post-info">
          <view class="post-desc">{{item.description}}</view>
          <view class="post-meta">
            <text class="post-category">{{item.category.name}}</text>
            <text class="post-location" wx:if="{{item.locationText}}">üìç{{item.locationText}}</text>
          </view>
          <view class="post-tags" wx:if="{{item.tags && item.tags.length}}">
            <text wx:for="{{item.tags}}" wx:key="*this" wx:for-item="tag" class="tag">{{tag}}</text>
          </view>
        </view>
      </view>

      <view wx:if="{{loading}}" class="loading-tip">
        <t-loading theme="circular" size="40rpx" />
        <text>Âä†ËΩΩ‰∏≠...</text>
      </view>
    </view>
  </t-pull-down-refresh>
</view>

<view class="home-release">
  <t-button theme="primary" size="large" icon="add" shape="round" bindtap="goRelease">
    ÂèëÂ∏É
  </t-button>
</view>
<t-message id="t-message" />
